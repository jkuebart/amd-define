var define=function(){"use strict";function e(){return new Error([].join.call(arguments,": "))}function n(e,n){return(1+e.length+e.lastIndexOf(n))%(1+e.length)}function t(e){return e.slice(0,1+e.lastIndexOf("/"))}function r(e){return e.slice(1+e.lastIndexOf("/"))}function o(e,n){return e.slice(0,n.length)===n}function i(u){function s(e,i){var c,s=r(e);if(l.test(e))return e;s=s.slice(n(s,".")),e=e.slice(0,-s.length),"."!==e[0]||i.empty()||(e=t(i.top().id)+e),e=e.split("/").reduce(function(e,n){switch(n){case"":case".":return e;case"..":return e.slice(0,-1);default:return e.concat(n)}},[]).join("/");for(c in u.paths)({}).hasOwnProperty.call(u.paths,c)&&(e===c||o(e,c+"/"))&&(e=u.paths[c]+e.slice(c.length));return(l.test(e)?"":u.baseUrl)+e+s}var f={},a={};return f.toUrl=s,f.define=function(e,n){return e&&(a[e]?a[e].resolve&&a[e].resolve(n):a[e]={module:n}),f},f.get=function(n,t){function r(u){document.head.removeChild(o),o.removeEventListener("error",r),o.removeEventListener("load",r),c(t.push({id:n,repo:f})),"error"===u.type?i.reject(e("define",n,"load error")):i.reject(e("define","unresolved dependency",n))}var o,i=a[n];return i||(i=a[n]={},i.module=new Promise(function(e,n){i.resolve=e,i.reject=n}),o=document.createElement("script"),o.setAttribute("src",s(n+".js",t)),o.addEventListener("error",r),o.addEventListener("load",r),document.head.appendChild(o)),i.module},f.config=function(e){return i(d({},u,e))},f}function u(n,t){function r(o,i){var u={exports:{}};if("string"==typeof o)throw e("require","synchronous mode unimplemented");return o.length?Promise.all(o.map(function(o){var i;switch(o=o.split("!"),o[0]){case"exports":return u.exports;case"module":return u;case"require":return r}if(t.some(function(e){return o[0]===e.id}))throw e("require","circular dependency",t.map(function(e){return e.id}).push(o[0]));return i=n.get(o[0],t),o.length<2?i:Promise.resolve(i).then(function(e){return new Promise(function(n){e.load(o.slice(1).join("!"),r,n)})})})).then(function(e){return i?i.apply(void 0,e):e}):i?i([]):[]}return r.toUrl=function(e){return n.toUrl(e,t)},r}function c(e){var n,t=h;h=[],e=e||p(),n=e.empty()?{}:e.top(),t.forEach(function(t){var r=t.repo||n.repo||m;r.define(t.id||n.id,"function"!=typeof t.mod?t.mod:Promise.resolve(u(r,e)(t.env)).then(function(e){var n=t.env.indexOf("module"),r=t.env.indexOf("exports");return t.mod.apply(void 0,e)||-1!==n&&e[n].exports||-1!==r&&e[r]}))})}function s(e){function n(n,t,r){arguments.length<3&&(r=arguments[arguments.length-1],t=arguments.length<2||"string"==typeof n?void 0:n,(arguments.length<2||"string"!=typeof n)&&(n=void 0)),t||(t="function"==typeof r&&r.length?a:[]),h.push({id:n,env:t,mod:r,repo:e}),f()}return n.config=function(n){return s((e||m).config(n))},n.amd={},n}var f,l=RegExp("^(/|[-+.A-Za-z0-9]+:)"),a=["require","exports","module"],d=Object.assign||function(e){var n,t,r;for(t=1;t<arguments.length;++t)if(n=arguments[t],null!=n)for(r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},p=function(){var e={};return e.empty=function(){return!0},e.toString=function(){return""},e.some=function(){},e.map=function(){return e},e.push=function(n){var t=this,r=Object.create(e);return r.top=function(){return n},r.pop=function(){return t},r.empty=function(){return!1},r.toString=function(){return n+", "+t},r.some=function(e){return e(n)||t.some(e)},r.map=function(e){return t.map(e).push(e(n))},r},function(){return e}}(),m=i({baseUrl:"",paths:{}}),h=[];return new Promise(function(e){f=e}).then(c),s()}();
//# sourceMappingURL=define.js.map